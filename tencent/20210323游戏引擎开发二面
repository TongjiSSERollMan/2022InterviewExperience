# 二面

# 游戏引擎开发

2021.03.23 19:00 ～ 20:10 腾讯会议，全程无摄像头、无屏幕共享

面试内容包含系统结构相关知识，无计网无算法

### 自我介绍

无自我介绍环节

### 笔试环节（30min）

从腾讯会议的文档部分下载文档，闭麦写代码

两道题目：

1. 下面代码可否进行优化？说明理由

```cpp
int a[2048][2048]
for(int x = 0; x < 2048; ++x)
	for(int y = 0; y < 2048; ++y)
			a[y][x]++;
```

 2.  给出下列对象 PoolObj 的实现，请你实现一个对象池 PoolMgr

```cpp
class PoolObj
{
public:
		void Init(); //初始化时候调用
		void Clear(); //资源清理时使用
};

//实现如下所示的对象池
class PoolMgr
{
public:
		void Init(int n); //初始化出 n 个 PoolObj 用于分配
		PoolObj* Alloc(); //分配一个对象，如果 pool 里面有则分配，如果 pool 已经空了
											//就 new 一个出来
		bool Free(Poolbj* param); //回收一个对象，如果属于预先分配的 Pool 则收回
															//pool 中并返回 true， 不在则 delete 掉，返回 false
};
```

### 提问环节（40min）

- 首先围绕两道笔试题来问
    - 第一题：
        - 说一下你这么优化的原理是什么，你还能想到其他的优化方式吗？
        - 为什么 x 和 y 互换能改善性能，底层的原理是什么样的？
        - 了解 Cache 吗，简单介绍一下？Cache 替换有什么规则吗？
        - 可以通过并行来进行优化吗？并行有哪几种并行？
        - （暗示可以用 SIMD 优化）知道 SIMD 吗，介绍一下？
        - 知道 CPU 的流水线吗？简单介绍一下？什么时候流水线会发生冲突？
        - 了解 C++ 如何编写多线程吗？它和 Python 的多线程有什么区别？
        - 锁有哪几种？简单介绍一下？
    - 第二题：
        - 说一下你实现对象池的思路（我使用 list 连接对象，使用 set 存储对象指针来在 Free 的时候判断是不是之前池中分配的）
        - 你的 Free 和 Alloc 函数在实现上可以继续在时间上进行优化吗？（答用哈希表代替 Set）
        - 为什么哈希表比 Set 快？
        - 哈希表的原理是是什么？如果我得到的哈希值超出了你哈希表的长度怎么办（哈希算法）？如果我两个元素有一样的哈希值怎么办（哈希冲突）？
        - 可以用数组代替 List 实现对象的存储吗
- 之后开始问其他的问题
    - 擅长的语言？（答C++）
        - 虚函数知道吗？介绍一下？
    - 说一下你知道的排序算法和他们的时间复杂度
    - UE4 项目相关
        - 做了两个月？几人项目？
        - 形容一下最后的成果？
        - 你在项目中的工作？
        - 人物动画是怎么制作的？
    - 熟悉 C# 吗？
        - 答数据库项目中使用过，这学期专业课会深入学习
    - （可能是发现有什么地方不对劲）你是大三的还是大四的？
    - 学过图形学吗？
        - 答没有

### 反问环节

- 我现在面的岗位为什么和 join 上有出入？
    - 答简历会在池中等待面试官选择，选择后会被锁住，实际面试岗位和的意向不同是正常现象
- 看重项目经历吗？
    - 答对实习生要求没那么高，但是有项目经历可以加分
